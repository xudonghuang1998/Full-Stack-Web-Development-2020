{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Persons.js","services/persons.js","App.js","index.js"],"names":["Filter","searchName","handleSearchChange","value","onChange","PersonForm","addPerson","newName","handleNameChange","newNumber","handleNumberChange","onSubmit","type","Persons","searchedPersons","deletePerson","map","person","i","className","name","number","onClick","id","baseUrl","personService","getAll","axios","get","then","response","data","create","newObject","post","update","put","del","a","delete","request","App","useState","persons","setPersons","setNewName","setNewNumber","setSearchName","success","setSuccess","error","setError","errorState","Success","message","Error","useEffect","initialPersons","filter","toLowerCase","includes","event","preventDefault","some","window","confirm","updatePerson","personObject","returnedPerson","concat","catch","setTimeout","existingperson","find","changedPerson","target","currentPersons","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.bc9b43bc.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nconst Filter = ({searchName, handleSearchChange}) => {\r\n    return (\r\n        <form>\r\n            <div>\r\n                filter shown with:\r\n                <input\r\n                    value={searchName}\r\n                    onChange={handleSearchChange}\r\n                />\r\n            </div>\r\n        </form>\r\n    );\r\n};\r\n\r\nexport default Filter;","import React from \"react\";\r\n\r\nconst PersonForm = ({addPerson, newName, handleNameChange, newNumber, handleNumberChange}) => {\r\n    return (\r\n        <form onSubmit={addPerson}>\r\n            <div>\r\n                name:\r\n                <input\r\n                    value={newName}\r\n                    onChange={handleNameChange}\r\n                />\r\n            </div>\r\n            <div>\r\n                number:\r\n                <input\r\n                    value={newNumber}\r\n                    onChange={handleNumberChange}\r\n                />\r\n            </div>\r\n            <div>\r\n                <button type=\"submit\">add</button>\r\n            </div>\r\n        </form>\r\n    );\r\n};\r\n\r\nexport default PersonForm;","import React from \"react\";\r\n\r\nconst Persons = ({searchedPersons, deletePerson}) => {\r\n    return (\r\n        <ul>\r\n            {searchedPersons.map((person,i) =>\r\n                <li className='person' key={i}>\r\n                    {person.name} {person.number}\r\n                    <button onClick={() => {deletePerson(person.id, person.name)}}>delete</button>\r\n                </li>\r\n            )}\r\n        </ul>\r\n    );\r\n};\r\n\r\nexport default Persons;","import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseUrl)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst create = newObject => {\r\n    const request = axios.post(baseUrl, newObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n    const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst del = async (id) => {\r\n    await axios.delete(`${baseUrl}/${id}`)\r\n    const request = axios.get(baseUrl)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst personService = {\r\n    getAll,\r\n    create,\r\n    update,\r\n    del\r\n}\r\n\r\nexport default personService","import React, {useEffect, useState} from 'react'\r\nimport Filter from \"./components/Filter\";\r\nimport PersonForm from \"./components/PersonForm\"\r\nimport Persons from \"./components/Persons\"\r\nimport personService from \"./services/persons\"\r\n\r\nconst App = () => {\r\n    const [ persons, setPersons ] = useState([{ name: ''}])\r\n    const [ newName, setNewName ] = useState('')\r\n    const [ newNumber, setNewNumber ] = useState('')\r\n    const [ searchName, setSearchName ] = useState('')\r\n    const [ success, setSuccess ] = useState(null)\r\n    const [ error, setError ] = useState(null)\r\n    let errorState = false\r\n\r\n    const Success = ({ message }) => {\r\n        if (message === null) {\r\n            return null\r\n        }\r\n        return (\r\n            <div className=\"success\">\r\n                {message}\r\n            </div>\r\n        )\r\n    }\r\n\r\n    const Error = ({ message }) => {\r\n        if (message === null) {\r\n            return null\r\n        }\r\n        return (\r\n            <div className=\"error\">\r\n                {message}\r\n            </div>\r\n        )\r\n    }\r\n\r\n    const hook = () => {\r\n        personService\r\n            .getAll()\r\n            .then(initialPersons => {\r\n                setPersons(initialPersons)\r\n            })\r\n    }\r\n\r\n    useEffect(hook, [])\r\n\r\n    const searchedPersons = persons.filter(\r\n        (person) =>\r\n            person.name.toLowerCase().includes(searchName.toLowerCase())\r\n    );\r\n\r\n    const addPerson = async (event) => {\r\n        event.preventDefault()\r\n\r\n        const nameExists = persons.some((person) => person.name === newName)\r\n\r\n        if (nameExists) {\r\n            if (window.confirm(`${newName} is already added to the phonebook, replace the old number with a new one?`))\r\n                await updatePerson()\r\n        } else {\r\n            const personObject = {\r\n                name: newName,\r\n                number: newNumber\r\n            }\r\n            await personService\r\n                .create(personObject)\r\n                .then(returnedPerson => {\r\n                    setPersons(persons.concat(returnedPerson))\r\n                    setNewName('')\r\n                    setNewNumber('')\r\n                })\r\n                .catch(error => {\r\n                    // this is the way to access the error message\r\n                    errorState = true\r\n                    setError(error.response.data.error)\r\n                    setTimeout(() => {\r\n                        setError(null)\r\n                    }, 5000)\r\n                })\r\n\r\n            if(errorState){\r\n                errorState = false\r\n                return null\r\n            }\r\n\r\n            setSuccess(\r\n                `${newName} added!`\r\n            )\r\n            setTimeout(() => {\r\n                setSuccess(null)\r\n            }, 5000)\r\n        }\r\n    }\r\n\r\n    // const handleError = async ( changedPerson ) => {\r\n    //     await setError(\r\n    //         `${changedPerson.name} was already removed!`\r\n    //     )\r\n    //     setTimeout(() => {\r\n    //         setError(null)\r\n    //     }, 5000)\r\n    //     setPersons(persons.filter((person) => person.id !== changedPerson.id))\r\n    // }\r\n\r\n    const updatePerson = async () => {\r\n        const existingperson = persons.find(person => person.name === newName)\r\n        const changedPerson = {...existingperson, number: newNumber}\r\n        await personService\r\n            .update(existingperson.id, changedPerson)\r\n            .then(returnedPerson => {\r\n                setPersons(persons.map(person => person.name !== newName ? person : changedPerson))\r\n            })\r\n            .catch(error => {\r\n                errorState = true\r\n                setError(error.response.data.error)\r\n                setTimeout(() => {\r\n                    setError(null)\r\n                }, 5000)\r\n            })\r\n        if(errorState){\r\n            errorState = false\r\n            return null\r\n        }\r\n        setSuccess(\r\n            `New number ${newNumber} added to ${newName}!`\r\n        )\r\n        setTimeout(() => {\r\n            setSuccess(null)\r\n        }, 5000)\r\n    };\r\n\r\n    const deletePerson = (id,name) => {\r\n        if (window.confirm(`Delete ${name} ?`)) {\r\n            personService\r\n                .del(id)\r\n                .then(currentPersons => {\r\n                    setPersons(currentPersons)\r\n                })\r\n            setSuccess(\r\n                `${name} Deleted!`\r\n            )\r\n            setTimeout(() => {\r\n                setSuccess(null)\r\n            }, 5000)\r\n        }\r\n    };\r\n\r\n    const handleNameChange = (event) => {\r\n        setNewName(event.target.value)\r\n    }\r\n\r\n    const handleNumberChange = (event) => {\r\n        setNewNumber(event.target.value)\r\n    }\r\n\r\n    const handleSearchChange = (event) => {\r\n        setSearchName(event.target.value)\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <h2>Phonebook</h2>\r\n            <Success message={success} />\r\n            <Error message={error} />\r\n            <Filter\r\n                searchName={searchName}\r\n                handleSearchChange={handleSearchChange}\r\n            />\r\n            <h2>add a new</h2>\r\n            <PersonForm\r\n                addPerson = {addPerson}\r\n                newName = {newName}\r\n                handleNameChange = {handleNameChange}\r\n                newNumber = {newNumber}\r\n                handleNumberChange = {handleNumberChange}\r\n            />\r\n            <h2>Numbers</h2>\r\n            <Persons\r\n                searchedPersons={searchedPersons}\r\n                deletePerson={deletePerson}\r\n            />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\n\nReactDOM.render(\n    <App/>,\n    document.getElementById('root')\n)"],"sourceRoot":""}
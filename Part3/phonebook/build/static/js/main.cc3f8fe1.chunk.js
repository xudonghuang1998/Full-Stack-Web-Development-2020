(this.webpackJsonptest=this.webpackJsonptest||[]).push([[0],{26:function(e,n,t){},46:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t(1),c=t(19),u=t.n(c),o=(t(26),t(10)),s=t(3),i=t.n(s),l=t(5),d=t(20),h=t(4),j=function(e){var n=e.searchName,t=e.handleSearchChange;return Object(a.jsx)("form",{children:Object(a.jsxs)("div",{children:["filter shown with:",Object(a.jsx)("input",{value:n,onChange:t})]})})},f=function(e){var n=e.addPerson,t=e.newName,r=e.handleNameChange,c=e.newNumber,u=e.handleNumberChange;return Object(a.jsxs)("form",{onSubmit:n,children:[Object(a.jsxs)("div",{children:["name:",Object(a.jsx)("input",{value:t,onChange:r})]}),Object(a.jsxs)("div",{children:["number:",Object(a.jsx)("input",{value:c,onChange:u})]}),Object(a.jsx)("div",{children:Object(a.jsx)("button",{type:"submit",children:"add"})})]})},b=function(e){var n=e.searchedPersons,t=e.deletePerson;return Object(a.jsx)("ul",{children:n.map((function(e,n){return Object(a.jsxs)("li",{className:"person",children:[e.name," ",e.number,Object(a.jsx)("button",{onClick:function(){t(e.id,e.name)},children:"delete"})]},n)}))})},m=t(6),p=t.n(m),O="/api/persons",v={getAll:function(){return p.a.get(O).then((function(e){return e.data}))},create:function(e){return p.a.post(O,e).then((function(e){return e.data}))},update:function(e,n){return p.a.put("".concat(O,"/").concat(e),n).then((function(e){return e.data}))},del:function(){var e=Object(l.a)(i.a.mark((function e(n){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.delete("".concat(O,"/").concat(n));case 2:return t=p.a.get(O),e.abrupt("return",t.then((function(e){return e.data})));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},x=function(){var e=Object(r.useState)([{name:""}]),n=Object(h.a)(e,2),t=n[0],c=n[1],u=Object(r.useState)(""),s=Object(h.a)(u,2),m=s[0],p=s[1],O=Object(r.useState)(""),x=Object(h.a)(O,2),w=x[0],g=x[1],N=Object(r.useState)(""),C=Object(h.a)(N,2),k=C[0],y=C[1],S=Object(r.useState)(null),P=Object(h.a)(S,2),T=P[0],D=P[1],A=Object(r.useState)(null),E=Object(h.a)(A,2),J=E[0],L=E[1],M=!1,B=function(e){var n=e.message;return null===n?null:Object(a.jsx)("div",{className:"success",children:n})},I=function(e){var n=e.message;return null===n?null:Object(a.jsx)("div",{className:"error",children:n})};Object(r.useEffect)((function(){v.getAll().then((function(e){c(e)}))}),[]);var q=t.filter((function(e){return e.name.toLowerCase().includes(k.toLowerCase())})),z=function(){var e=Object(l.a)(i.a.mark((function e(n){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),t.some((function(e){return e.name===m}))?window.confirm("".concat(m," is already added to the phonebook, replace the old number with a new one?"))&&G():(a={name:m,number:w,id:(t.length>0?Math.max.apply(Math,Object(d.a)(t.map((function(e){return e.id})))):0)+1},v.create(a).then((function(e){c(t.concat(e)),p(""),g("")})),D("".concat(m," added!")),setTimeout((function(){D(null)}),5e3));case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),F=function(){var e=Object(l.a)(i.a.mark((function e(n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L("".concat(n.name," was already removed!"));case 2:setTimeout((function(){L(null)}),5e3),c(t.filter((function(e){return e.id!==n.id})));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),G=function(){var e=Object(l.a)(i.a.mark((function e(){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.find((function(e){return e.name===m})),a=Object(o.a)(Object(o.a)({},n),{},{number:w}),e.next=4,v.update(n.id,a).then((function(e){c(t.map((function(n){return n.name!==m?n:e})))})).catch((function(e){M=!0,F(a)}));case 4:if(!M){e.next=7;break}return M=!1,e.abrupt("return",null);case 7:D("New number ".concat(w," added to ").concat(m,"!")),setTimeout((function(){D(null)}),5e3);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsxs)("div",{children:[Object(a.jsx)("h2",{children:"Phonebook"}),Object(a.jsx)(B,{message:T}),Object(a.jsx)(I,{message:J}),Object(a.jsx)(j,{searchName:k,handleSearchChange:function(e){y(e.target.value)}}),Object(a.jsx)("h2",{children:"add a new"}),Object(a.jsx)(f,{addPerson:z,newName:m,handleNameChange:function(e){p(e.target.value)},newNumber:w,handleNumberChange:function(e){g(e.target.value)}}),Object(a.jsx)("h2",{children:"Numbers"}),Object(a.jsx)(b,{searchedPersons:q,deletePerson:function(e,n){window.confirm("Delete ".concat(n," ?"))&&(v.del(e).then((function(e){c(e)})),D("".concat(n," Deleted!")),setTimeout((function(){D(null)}),5e3))}})]})};u.a.render(Object(a.jsx)(x,{}),document.getElementById("root"))}},[[46,1,2]]]);
//# sourceMappingURL=main.cc3f8fe1.chunk.js.map
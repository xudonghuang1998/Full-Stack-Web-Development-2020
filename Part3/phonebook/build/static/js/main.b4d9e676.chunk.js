(this.webpackJsonptest=this.webpackJsonptest||[]).push([[0],{23:function(e,n,t){},43:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t(1),c=t(17),u=t.n(c),o=(t(23),t(8)),s=t(3),i=t.n(s),l=t(5),d=t(4),h=function(e){var n=e.searchName,t=e.handleSearchChange;return Object(r.jsx)("form",{children:Object(r.jsxs)("div",{children:["filter shown with:",Object(r.jsx)("input",{value:n,onChange:t})]})})},j=function(e){var n=e.addPerson,t=e.newName,a=e.handleNameChange,c=e.newNumber,u=e.handleNumberChange;return Object(r.jsxs)("form",{onSubmit:n,children:[Object(r.jsxs)("div",{children:["name:",Object(r.jsx)("input",{value:t,onChange:a})]}),Object(r.jsxs)("div",{children:["number:",Object(r.jsx)("input",{value:c,onChange:u})]}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{type:"submit",children:"add"})})]})},f=function(e){var n=e.searchedPersons,t=e.deletePerson;return Object(r.jsx)("ul",{children:n.map((function(e,n){return Object(r.jsxs)("li",{className:"person",children:[e.name," ",e.number,Object(r.jsx)("button",{onClick:function(){t(e.id,e.name)},children:"delete"})]},n)}))})},b=t(6),m=t.n(b),p="http://localhost:3001/api/persons",O={getAll:function(){return m.a.get(p).then((function(e){return e.data}))},create:function(e){return m.a.post(p,e).then((function(e){return e.data}))},update:function(e,n){return m.a.put("".concat(p,"/").concat(e),n).then((function(e){return e.data}))},del:function(){var e=Object(l.a)(i.a.mark((function e(n){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.delete("".concat(p,"/").concat(n));case 2:return t=m.a.get(p),e.abrupt("return",t.then((function(e){return e.data})));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},v=4,x=function(){var e=Object(a.useState)([{name:""}]),n=Object(d.a)(e,2),t=n[0],c=n[1],u=Object(a.useState)(""),s=Object(d.a)(u,2),b=s[0],m=s[1],p=Object(a.useState)(""),x=Object(d.a)(p,2),w=x[0],g=x[1],N=Object(a.useState)(""),C=Object(d.a)(N,2),k=C[0],S=C[1],y=Object(a.useState)(null),P=Object(d.a)(y,2),T=P[0],D=P[1],A=Object(a.useState)(null),E=Object(d.a)(A,2),J=E[0],L=E[1],B=!1,I=function(e){var n=e.message;return null===n?null:Object(r.jsx)("div",{className:"success",children:n})},q=function(e){var n=e.message;return null===n?null:Object(r.jsx)("div",{className:"error",children:n})};Object(a.useEffect)((function(){O.getAll().then((function(e){c(e)}))}),[]);var z=t.filter((function(e){return e.name.toLowerCase().includes(k.toLowerCase())})),F=function(){var e=Object(l.a)(i.a.mark((function e(n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),t.some((function(e){return e.name===b}))?window.confirm("".concat(b," is already added to the phonebook, replace the old number with a new one?"))&&H():(r={name:b,number:w,id:++v},O.create(r).then((function(e){c(t.concat(e)),m(""),g("")})),D("".concat(b," added!")),setTimeout((function(){D(null)}),5e3));case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),G=function(){var e=Object(l.a)(i.a.mark((function e(n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L("".concat(n.name," was already removed!"));case 2:setTimeout((function(){L(null)}),5e3),c(t.filter((function(e){return e.id!==n.id})));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),H=function(){var e=Object(l.a)(i.a.mark((function e(){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.find((function(e){return e.name===b})),r=Object(o.a)(Object(o.a)({},n),{},{number:w}),e.next=4,O.update(n.id,r).then((function(e){c(t.map((function(n){return n.name!==b?n:e})))})).catch((function(e){B=!0,G(r)}));case 4:if(!B){e.next=7;break}return B=!1,e.abrupt("return",null);case 7:D("New number ".concat(w," added to ").concat(b,"!")),setTimeout((function(){D(null)}),5e3);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"Phonebook"}),Object(r.jsx)(I,{message:T}),Object(r.jsx)(q,{message:J}),Object(r.jsx)(h,{searchName:k,handleSearchChange:function(e){S(e.target.value)}}),Object(r.jsx)("h2",{children:"add a new"}),Object(r.jsx)(j,{addPerson:F,newName:b,handleNameChange:function(e){m(e.target.value)},newNumber:w,handleNumberChange:function(e){g(e.target.value)}}),Object(r.jsx)("h2",{children:"Numbers"}),Object(r.jsx)(f,{searchedPersons:z,deletePerson:function(e,n){window.confirm("Delete ".concat(n," ?"))&&(O.del(e).then((function(e){c(e)})),D("".concat(n," Deleted!")),setTimeout((function(){D(null)}),5e3))}})]})};u.a.render(Object(r.jsx)(x,{}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.b4d9e676.chunk.js.map